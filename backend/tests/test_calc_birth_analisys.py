from app.services.calc_birth_analysis import synthesize_reading


def test_synthesize_reading() -> None:
    meishiki = {"年柱": "乙卯", "月柱": "戊寅", "日柱": "辛巳", "時柱": "乙卯"}
    balance = {"木": 4, "火": 2, "土": 1, "金": 1, "水": 0}
    result: dict = synthesize_reading(meishiki, balance)
    print(result)
    expect_result = {
        "四柱": {
            "年柱": {
                "柱": "年柱",
                "干支": "乙卯",
                "領域": "家系・幼少期・ルーツに影響。家族の価値観や幼少期の性質を示す。",
                "十干の性質": "柔らかく調和的。人間関係に強い。",
                "十二支の性質": "社交性と調和。人間関係に恵まれる。",
                "まとめ": "年柱は家系・幼少期・ルーツに影響。家族の価値観や幼少期の性質を示す。柔らかく調和的。人間関係に強い。社交性と調和。人間関係に恵まれる。の性質が強く表れる。",
            },
            "月柱": {
                "柱": "月柱",
                "干支": "戊寅",
                "領域": "社会・青年期・仕事運に影響。20〜40代の運勢や社会的立場を示す。",
                "十干の性質": "安定感があり、責任感が強い。",
                "十二支の性質": "行動力と勇気。リーダーシップ。",
                "まとめ": "月柱は社会・青年期・仕事運に影響。20〜40代の運勢や社会的立場を示す。安定感があり、責任感が強い。行動力と勇気。リーダーシップ。の性質が強く表れる。",
            },
            "日柱": {
                "柱": "日柱",
                "干支": "辛巳",
                "領域": "本人の本質・性格・結婚運を示す。人生の中心となる柱。",
                "十干の性質": "美意識が高く、繊細でこだわりが強い。",
                "十二支の性質": "情熱と探究心。精神性が強い。",
                "まとめ": "日柱は本人の本質・性格・結婚運を示す。人生の中心となる柱。美意識が高く、繊細でこだわりが強い。情熱と探究心。精神性が強い。の性質が強く表れる。",
            },
            "時柱": {
                "柱": "時柱",
                "干支": "乙卯",
                "領域": "晩年運・子供運・才能を示す。後半生のテーマが表れる。",
                "十干の性質": "柔らかく調和的。人間関係に強い。",
                "十二支の性質": "社交性と調和。人間関係に恵まれる。",
                "まとめ": "時柱は晩年運・子供運・才能を示す。後半生のテーマが表れる。柔らかく調和的。人間関係に強い。社交性と調和。人間関係に恵まれる。の性質が強く表れる。",
            },
        },
        "五行": {
            "日主": "金",
            "強い五行": ["木"],
            "弱い五行": ["水"],
            "性格傾向": ["人との縁が強く、成長意欲が高い。新しいことに挑戦する力がある。"],
            "課題": ["考えすぎたり、逆に思考が浅くなったりする。柔軟性が不足しがち。"],
            "相性": {"助ける五行": "水", "弱らせる五行": "木"},
        },
        "総合テーマ": {
            "性格": ["人との縁が強く、成長意欲が高い。新しいことに挑戦する力がある。"],
            "課題": ["考えすぎたり、逆に思考が浅くなったりする。柔軟性が不足しがち。"],
            "人生の流れ": [
                "年柱は家系・幼少期・ルーツに影響。家族の価値観や幼少期の性質を示す。柔らかく調和的。人間関係に強い。社交性と調和。人間関係に恵まれる。の性質が強く表れる。",
                "月柱は社会・青年期・仕事運に影響。20〜40代の運勢や社会的立場を示す。安定感があり、責任感が強い。行動力と勇気。リーダーシップ。の性質が強く表れる。",
                "日柱は本人の本質・性格・結婚運を示す。人生の中心となる柱。美意識が高く、繊細でこだわりが強い。情熱と探究心。精神性が強い。の性質が強く表れる。",
                "時柱は晩年運・子供運・才能を示す。後半生のテーマが表れる。柔らかく調和的。人間関係に強い。社交性と調和。人間関係に恵まれる。の性質が強く表れる。",
            ],
        },
    }
    assert result == expect_result
